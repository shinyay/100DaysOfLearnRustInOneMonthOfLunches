# Day 33

## Notes

On June 29, Fermyon announced Spin v1.3.0, a feature that allows variables to be externalized and deployed to the Fermyon Cloud.

- [`spin cloud variables` command](https://www.fermyon.com/blog/exploring_variables)

Today I've just tried.

### Exploring Spin Application Variables

Let's create sample code.

#### Create template

```shell
spin new http-rust my-logging-app
```

```shell
Description: spin new http-rust my-logging-app
HTTP base: /
HTTP path: /...
```

<details>
<summary>spin.toml</summary>

```toml
spin_manifest_version = "1"
description = "spin new http-rust my-logging-app"
name = "my-logging-app"
trigger = { type = "http", base = "/" }
version = "0.1.0"

[[component]]
id = "my-logging-app"
source = "target/wasm32-wasi/release/my_logging_app.wasm"
allowed_http_hosts = []
[component.trigger]
route = "/..."
[component.build]
command = "cargo build --target wasm32-wasi --release"
watch = ["src/**/*.rs", "Cargo.toml"]
```

</details>

Add the followings

```toml
[variables]
loglevel = { required = true }
```

```toml
[component.config]
loglevel = "{{ loglevel }}"
```

#### Code application

Add dependencies:

- `log`
- `simple_logger`

```shell
cargo add log simple_logger
```

- [Code - lib.rs](./my-logging-app/src/lib.rs)

#### Build and Deploy application

<details>
<summary>spin build</summary>

```shell
spin build --help

spin-build
Build the Spin application

USAGE:
    spin build [OPTIONS] [--] [UP_ARGS]...

ARGS:
    <UP_ARGS>...

OPTIONS:
    -c, --component-id <COMPONENT_ID>...
            Component ID to build. This can be specified multiple times. The default is all
            components

    -f, --from <APP_MANIFEST_FILE>
            The application to build. This may be a manifest (spin.toml) file, or a directory
            containing a spin.toml file. If omitted, it defaults to "spin.toml" [default: spin.toml]

    -h, --help
            Print help information

    -u, --up
            Run the application after building
```

</details>

## Key Takeaways
