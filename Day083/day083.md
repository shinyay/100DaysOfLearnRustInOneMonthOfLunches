# Day 83

## Notes

### Scoped threads

**Scoped threads** are a new feature of Rust that makes multithreading and concurrency easier and safer.

Previously, the `crossbeam` crate provided a way to create scoped threads. However, that scoped thread function is now soft deprecated in favor of Rust's built-in scoped thread function.

#### Scope in Rust

A scope is a block of code contained within a block of code; the Rust compiler restricts access to variables and constants within a scope to lines and other scopes within that scope.

Depending on the programming language, scopes are usually associated with function definitions, conditional definitions, loop definitions, and selection definitions.

#### std::thread::scope

Threads provide a way to achieve concurrency in a Rust project. Scoped threads are regular threads that exist and run in a monitored context. A scope is an environment that allows you to easily manage many threads in your code.

To construct a scope, use the `std::thread::scope` function and pass a closure.

```rust
std::thread::scope(|scope| { });
```

#### Sample Code

Once the thread::scope function creates the scope, the program executes the closure that you provided. In the closure, the three scope.spawn methods will spawn three threads.

```rust
use std::{ thread, time };

fn main() {
   // create a scope
   thread::scope(|scope| {

       // spawn first thread
       scope.spawn(|| {
           thread::sleep( time::Duration::from_secs(1) );
           // wait for 1 second before printing "Hello, from thread 1"
           println!("Hello, from thread 1");
       });

       // spawn second thread
       scope.spawn(|| {
           thread::sleep( time::Duration::from_secs(2) );
           // wait for 2 seconds before printing "Hello, from thread 2"
           println!("Hello, from thread 2");
       });

       // spawn third thread
       scope.spawn(|| {
           thread::sleep( time::Duration::from_secs(3) );
           // wait for 3 seconds before printing "Hello, from thread 3"
           println!("Hello, from thread 3");
       });
   });

   // all threads within the scope has to be closed
   // for the program to continue
   println!("All threads completed!");
}
```


## Key Takeaways
